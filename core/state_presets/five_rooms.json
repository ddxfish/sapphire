{
  "name": "Five Rooms",
  "description": "Navigate 5 rooms, kill monster, get treasure. A simple test game for state engine.",
  "initial_state": {
    "player_room": {
      "value": 1,
      "type": "integer",
      "min": 1,
      "max": 5,
      "adjacent": 1,
      "label": "Room",
      "blockers": [
        {
          "target": 4,
          "from": 3,
          "requires": {"monster_alive": false},
          "message": "The monster blocks your path! You must defeat it first."
        },
        {
          "target": 5,
          "requires": {"has_key": true},
          "message": "The door to room 5 is locked. You need a key."
        }
      ]
    },
    "player_health": {
      "value": 20,
      "type": "integer",
      "min": 0,
      "max": 20,
      "label": "HP"
    },
    "has_key": {
      "value": false,
      "type": "boolean",
      "label": "Has Key"
    },
    "monster_alive": {
      "value": true,
      "type": "boolean",
      "label": "Monster Alive"
    },
    "monster_health": {
      "value": 10,
      "type": "integer",
      "min": 0,
      "max": 10,
      "label": "Monster HP"
    },
    "treasure_collected": {
      "value": false,
      "type": "boolean",
      "label": "Victory"
    }
  },
  "progressive_prompt": {
    "iterator": "player_room",
    "mode": "cumulative",
    "base": "You are running Five Rooms, a dungeon crawl. Use state tools for ALL game state changes - never track state in memory.\n\nRules:\n- Player can move to adjacent rooms only (room Â±1) - the state engine enforces this\n- The state engine enforces blockers automatically. If set_state fails, narrate the failure.\n- Always call set_state() for movement with a reason. Describe the scene vividly after each action.\n- If player_health reaches 0, they die. Game over.",
    "segments": {
      "1": "ROOM 1 - THE ENTRANCE\nA torch-lit stone chamber. Dust motes drift in stale air. A dark corridor leads forward to room 2.",
      "2": "ROOM 2 - THE EMPTY HALL\nAn eerily quiet passage. Faded murals line the walls. You sense danger ahead. Corridors lead back to room 1 or forward to room 3.",
      "3": "ROOM 3 - THE MONSTER'S LAIR\nA hulking beast blocks the path! Combat rules: roll_dice(1,6) for player damage each attack. Monster deals 3 damage per turn. When monster_health hits 0, set monster_alive=false. Only then can player proceed to room 4.",
      "4": "ROOM 4 - THE KEY CHAMBER\nA gleaming brass key rests on a stone pedestal. When player enters, set has_key=true automatically. A heavy locked door leads to room 5.",
      "5": "ROOM 5 - THE TREASURE VAULT\nGold and jewels sparkle in torchlight! Set treasure_collected=true. VICTORY! Congratulate the player on completing Five Rooms."
    }
  }
}